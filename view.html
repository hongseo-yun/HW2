<!DOCTYPE html>
<html lang="en">
<head>
  <title>View Task</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="my.css">
</head>
<body>
  <div class="container">
    <h2>과제 상세보기</h2>
    <div id="taskDetail"></div>
    <div style="margin-top: 15px;">
      <button class="btn btn-primary" onclick="goEdit()">Edit</button>
      <button class="btn btn-danger" onclick="deleteTask()">Delete</button>
      <button class="btn btn-secondary" onclick="goList()">List</button>
    </div>
  </div>

  <script>
    function getTasks() {
      return JSON.parse(localStorage.getItem('tasks')) || [];
    }

    const index = localStorage.getItem('selectedIndex');
    const tasks = getTasks();
    const task = tasks[index];

    if (task) {
      document.getElementById('taskDetail').innerHTML = `
        <p><strong>Title:</strong> ${task.title}</p>
        <p><strong>Due:</strong> ${task.due}</p>
        <p><strong>Detail:</strong> ${task.detail}</p>
        <p><strong>Finish:</strong> ${task.finish}</p>
        <p><strong>Priority:</strong> ${task.priority}</p>
        <p><strong>Category:</strong> ${task.category}</p>
      `;
    } else {
      document.getElementById('taskDetail').innerHTML = "<p>과제를 찾을 수 없습니다.</p>";
    }

    function goEdit() {
      window.location.href = "edit.html";
    }

    function deleteTask() {
      if (!confirm("Do you want to delete this item?")) return;
      tasks.splice(index, 1);
      localStorage.setItem('tasks', JSON.stringify(tasks));
      window.location.href = "index.html";
    }

    function goList() {
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
