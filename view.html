<!DOCTYPE html>
<html lang="en">
<head>
  <title>View Task</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="my.css">
</head>
<body>
<div class="container">
  <h2>과제 상세보기</h2>
  <div id="taskDetail"></div>
  <div style="margin-top: 15px;">
    <button class="btn-primary" onclick="goEdit()">Edit</button>
    <button class="btn-danger" onclick="deleteTask()">Delete</button>
    <button class="btn-secondary" onclick="goList()">List</button>
  </div>
</div>

<script>
function getTasks() {
  return localStorage.getItem('tasks') ? localStorage.getItem('tasks').split(";") : [];
}

const index = localStorage.getItem('selectedIndex');
const tasks = getTasks();
const task = tasks[index];

if (task) {
  const parts = task.split("|");
  document.getElementById('taskDetail').innerHTML = `
    <p><strong>Title:</strong> ${parts[0]}</p>
    <p><strong>Due:</strong> ${parts[1]}</p>
    <p><strong>Detail:</strong> ${parts[2]}</p>
    <p><strong>Finish:</strong> ${parts[3]}</p>
    <p><strong>Priority:</strong> ${parts[4]}</p>
    <p><strong>Category:</strong> ${parts[5]}</p>
  `;
} else {
  document.getElementById('taskDetail').innerHTML = "<p>과제를 찾을 수 없습니다.</p>";
}

function goEdit() {
  window.location.href = "edit.html";
}

function deleteTask() {
  if (!confirm("Do you want to delete this item?")) return;
  tasks.splice(index, 1);
  localStorage.setItem('tasks', tasks.join(";"));
  window.location.href = "index.html";
}

function goList() {
  window.location.href = "index.html";
}
</script>
</body>
</html>
