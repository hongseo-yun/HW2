<!DOCTYPE html>
<html lang="en">
<head>
  <title>과제 CRUD</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="my.css">
</head>
<body>
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Logo</a>
    </div>
    <ul class="nav navbar-nav">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Projects</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </div>
</nav>

<div class="container-fluid text-center">
  <div class="row content">
    <!-- 왼쪽 사이드바 -->
    <div class="col-sm-2 sidenav">
      <div class="ph">취미</div>
      <p><a href="#">좋아하는 책</a></p>
      <p><a href="#">좋아하는 영화</a></p>
      <p><a href="#">좋아하는 운동</a></p>
      <div class="ph">과제</div>
      <p><a href="#">동아리 과제</a></p>
      <p><a href="#">수업 과제</a></p>
      <p><a href="#">기타 해야할 일</a></p>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="col-sm-8">
      <div class="up">
        <h1>Welcome to CRUD Program</h1>
      </div>
      <hr>
      <h3>
        <div class="sub">
          <h1>[과제 목록]</h1>
          <a href="add.html" class="btn btn-success" style="margin-bottom:10px;">Add</a>
        </div>
      </h3>

      <div class="list-a">
        <ul id="itemList"></ul>
      </div>
    </div>

    <!-- 오른쪽 광고 영역 -->
    <div class="col-sm-2 sidenav">
      <div class="well"><p>ADS</p></div>
      <div class="well"><p>ADS</p></div>
    </div>
  </div>
</div>

<footer class="container-fluid text-center">
  <p>Footer Text</p>
</footer>

<script>
  // 초기 10개 과제
  const initialTasks = [
    { title: "알고리즘 과제", due: "2025-09-30", detail: "문제 1~3 해결", finish: "No", priority: "High", category: "Study" },
    { title: "자료구조 과제", due: "2025-10-02", detail: "코드 작성 및 보고서", finish: "No", priority: "Medium", category: "Study" },
    { title: "웹 프로젝트", due: "2025-10-05", detail: "프론트엔드 디자인 완성", finish: "Yes", priority: "High", category: "Work" },
    { title: "DB 과제", due: "2025-10-07", detail: "ERD 다이어그램 제출", finish: "No", priority: "Low", category: "Study" },
    { title: "영어 에세이", due: "2025-10-08", detail: "1500자 이상 작성", finish: "No", priority: "Low", category: "Personal" },
    { title: "통계 레포트", due: "2025-10-09", detail: "데이터 분석 및 결과", finish: "Yes", priority: "Medium", category: "Study" },
    { title: "네트워크 과제", due: "2025-10-10", detail: "TCP 시뮬레이션", finish: "No", priority: "High", category: "Study" },
    { title: "운영체제 과제", due: "2025-10-12", detail: "프로세스 관리 보고서", finish: "No", priority: "Medium", category: "Study" },
    { title: "오픈소스 스튜디오", due: "2025-10-13", detail: "CRUD 웹앱 완성", finish: "No", priority: "High", category: "Work" },
    { title: "수학 과제", due: "2025-10-15", detail: "증명문제 풀이", finish: "Yes", priority: "Low", category: "Study" }
  ];

  function getTasks() {
    const data = JSON.parse(localStorage.getItem('tasks')) || [];
    return data.length ? data : initialTasks;
  }

  function saveTasks(tasks) {
    localStorage.setItem('tasks', JSON.stringify(tasks));
  }

  function renderTasks() {
    const tasks = getTasks();
    const list = document.getElementById('itemList');
    list.innerHTML = '';

    tasks.forEach((task, index) => {
      const li = document.createElement('li');
      li.className = 'list-card';
      li.innerHTML = `
        <strong class="task-title" onclick="goView(${index})" style="cursor:pointer;">
          ${task.title}
        </strong><br>
        <strong>Due:</strong> ${task.due} <br>
        <strong>Detail:</strong> ${task.detail} <br>
        <strong>Finish:</strong> ${task.finish} <br>
        <strong>Priority:</strong> ${task.priority} <br>
        <strong>Category:</strong> ${task.category}
        <button class="delete-btn" onclick="deleteTask(event, ${index})">Delete</button>
      `;
      list.appendChild(li);
    });
  }

  function deleteTask(event, index) {
    event.stopPropagation();
    if (!confirm("Do you want to delete this item?")) return;
    const tasks = getTasks();
    tasks.splice(index, 1);
    saveTasks(tasks);
    renderTasks();
  }

  function goView(index) {
    localStorage.setItem('selectedIndex', index);
    window.location.href = 'view.html';
  }

  window.onload = renderTasks;
</script>
</body>
</html>
